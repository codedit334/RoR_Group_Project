<%= render 'layouts/header' %>
<% if notice %>
  <p class="notice"><%= notice %></p>
<% elsif alert %>      
  <p class="alert"><%= alert %></p>
<% end %>
<h1>General Shopping List</h1>

<p>Total Value of the food items to buy: <%= @missing_foods.count %></p>
<p>Total Value of the food needed: <%= number_to_currency(@total_price, unit: '$') %></p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Quantity</th>
      <th>Price</th>
    </tr>
  </thead>
  <tbody>
    <% @missing_foods.each do |missing_food| %>
      <tr>
        <td><%= missing_food[:name] %></td>
        <td><%= missing_food[:quantity] %>&nbsp;&nbsp;<%= @general_food_list.find_by(name: missing_food[:name])&.measurement_unit %></td>
        <td><%= number_to_currency(@general_food_list.find_by(name: missing_food[:name])&.price * missing_food[:quantity], unit: '$') %></td>
      </tr>
    <% end %>
  </tbody>
</table>
